import sys
sys.path.append('../../')
from lib.cilok import urlEncode16,tokenuri,setTTL,keyuri
from lib.sampeu import getWMTS
from apps.models import calendar
from apps.templates import batik

class Controller(object):
	def home(self,uridt='null'):
		kabkotcord = [
		'111.167264, -8.129277',
		'111.499877, -7.944007',
		'111.627133, -8.151020',
		'111.917984, -8.094515',
		'112.241974, -8.130902',
		'112.019961, -7.848198',
		'112.676300, -8.116527',
		'113.135328, -8.123947',
		'113.653415, -8.228840',
		'114.214591, -8.323004',
		'113.951084, -7.927509',
		'114.021227, -7.737271',
		'113.319942, -7.855937',
		'112.822945, -7.722645',
		'112.712702, -7.450121',
		'112.485135, -7.538308',
		'112.266772, -7.564860',
		'111.933524, -7.596743',
		'111.643859, -7.626769',
		'111.356993, -7.671703',
		'111.356365, -7.441320',
		'111.809742, -7.260447',
		'111.906969, -6.951138',
		'112.320664, -7.122953',
		'112.568628, -7.135579',
		'112.933259, -7.046912',
		'113.253593, -7.060773',
		'113.498031, -7.059933',
		'113.867135, -7.001525',
		'112.020304, -7.844117',
		'112.166113, -8.094994',
		'112.632467, -7.970139',
		'113.203695, -7.776052',
		'112.903893, -7.650159',
		'112.438201, -7.470042',
		'111.528737, -7.629550',
		'112.721487, -7.275234',
		'112.529364, -7.832329'
		]
		listkabkot = [
		'%3501%','%3502%','%3503%','%3504%','%3505%','%3506%','%3507%','%3508%','%3509%','%3510%',
		'%3511%','%3512%','%3513%','%3514%','%3515%','%3516%','%3517%','%3518%','%3519%','%3520%',
		'%3521%','%3522%','%3523%','%3524%','%3525%','%3526%','%3527%','%3528%','%3529%',
		'%3571%','%3572%','%3573%','%3574%','%3575%','%3576%','%3577%','%3578%','%3579%'
		]
		provinsi = 'jatim'
		provloc = '112.351224, -7.698205'
		mapzoom = '9'
		batik.provinsi(provinsi,listkabkot,provloc,mapzoom,kabkotcord)
		cal = calendar.Calendar()
		dt = {}
		for kabkot in listkabkot:
			dt[kabkot]=cal.getYearCountKabKot(str(int(kabkot[1:3])),str(int(kabkot[3:5])),uridt)
		cal.close()
		dt['%WMTS%']=getWMTS()
		dt['%PERIODE%']=uridt
		dt['%LAMAN INDONESIA%']=urlEncode16(keyuri+'%peta%home'+'%'+uridt)
		dt['%TAHUN SEBELUMNYA%']=urlEncode16(keyuri+'%'+provinsi+'%home'+'%'+str(int(uridt)-1))
		dt['%TAHUN SETELAHNYA%']=urlEncode16(keyuri+'%'+provinsi+'%home'+'%'+str(int(uridt)+1))
		return dt